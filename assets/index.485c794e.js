import{L as p,C as l,S as o,g as a,T as u,G as b,A as f,s as v}from"./vendor.2f30cc89.js";const y=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const d of n.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerpolicy&&(n.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?n.credentials="include":i.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}};y();class w{constructor(){this.callbacks={}}on(t,e){typeof e=="function"&&(this.callbacks[t]=[...this.callbacks[t]||[],e])}emit(t,...e){(this.callbacks[t]||[]).forEach(s=>s(...e))}off(t,e){!this.callbacks[t]||(this.callbacks[t]=this.callbacks[t].filter(s=>s!==e))}}function x(r,t){let e=0;return(...s)=>{clearTimeout(e),e=setTimeout(()=>r.apply(this,s),t)}}class k extends w{constructor(){super();this.setSizes(),window.addEventListener("resize",x(()=>{this.setSizes(),this.emit("resize")},250))}setSizes(){this.width=window.innerWidth,this.height=window.innerHeight,this.pixelRatio=window.devicePixelRatio}}var C="/playrix-test/assets/floor.d94ebec2.jpg",S="/playrix-test/assets/plant-back.04f7decc.png",T="/playrix-test/assets/book-stand.1f570ffb.png",B="/playrix-test/assets/globe.1b661a35.png",E="/playrix-test/assets/table.f0f0f83c.png",P="/playrix-test/assets/couch.ca04e4e0.png",j="/playrix-test/assets/austin.f901177f.png",z="/playrix-test/assets/plant-front.b2f46b64.png",L="/playrix-test/assets/stair-0.01b92677.png",M="/playrix-test/assets/stair-1.6cab1f4b.png",O="/playrix-test/assets/stair-2.d86404fb.png",I="/playrix-test/assets/stair-3.0e6ed1d8.png",F="/playrix-test/assets/hammer.a30b2138.png",A="/playrix-test/assets/menu-0.41dadc1d.png",H="/playrix-test/assets/menu-1.ca96fe30.png",R="/playrix-test/assets/menu-2.13e7331b.png",W="/playrix-test/assets/menu-bg.bf837585.png",Y="/playrix-test/assets/menu-selected.7d9332d8.png",G="/playrix-test/assets/menu-ok.fb234c2e.png",N="/playrix-test/assets/logo.d08cba05.png",U="/playrix-test/assets/button.14aece60.png",q="/playrix-test/assets/banner.7bb0c3c4.png";const D=[{name:"floor",path:C},{name:"plantBack",path:S},{name:"bookStand",path:T},{name:"globe",path:B},{name:"table",path:E},{name:"couch",path:P},{name:"austin",path:j},{name:"plantFront",path:z},{name:"stair0",path:L},{name:"stair1",path:M},{name:"stair2",path:O},{name:"stair3",path:I},{name:"hammer",path:F},{name:"menu0",path:A},{name:"menu1",path:H},{name:"menu2",path:R},{name:"menuBg",path:W},{name:"menuSelected",path:Y},{name:"menuOk",path:G},{name:"logo",path:N},{name:"button",path:U},{name:"banner",path:q}],h=1390,c=640,K=1390/640;class V{constructor({index:t,name:e,position:s,onClick:i}={}){this.index=t,this.name=e,this.position=s,this.onClick=i,this.loader=p.shared,this.container=new l,this.container.position.set(...s),this.container.alpha=0,this.selected=!1,this.setSprite(),this.setTweens()}setSprite(){this.bg=new o(this.loader.resources.menuBg.texture),this.bg.interactive=!0,this.bg.buttonMode=!0,this.container.addChild(this.bg),this.container.pivot.set(this.container.width/2,this.container.height/2),this.selection=new o(this.loader.resources.menuSelected.texture),this.selection.anchor.set(.5),this.selection.position.set(this.container.width/2,this.container.height/2-4),this.selection.alpha=0,this.container.addChild(this.selection),this.option=new o(this.loader.resources[this.name].texture),this.option.anchor.set(.5),this.option.position.set(this.container.width/2,this.container.height/2-6),this.container.addChild(this.option),this.bg.on("pointerup",()=>{this.selected||this.onClick(this)})}setTweens(){this.tweens=[];const t=this.index*.25,e=a.to(this.container,{alpha:1,duration:.25,paused:!0,delay:t});this.container.scale.set(0);const s=a.to(this.container.scale,{x:1,y:1,duration:1,ease:"elastic.out(1, 0.6)",delay:t,paused:!0});this.tweens=[e,s]}show(){this.tweens.forEach(t=>t.play())}deselect(){this.selected=!1,this.selection.alpha=0}toggle(){this.selected=!this.selected,this.selection.alpha=+this.selected}}let m=null;class g extends w{constructor(){super();if(m)return m;m=this,this.loader=p.shared,this.container=new l,this.opened=!1,this.setTrigger(),this.setItems()}setTrigger(){const t={x:h-252,y:c-252},e=new o(this.loader.resources.hammer.texture);e.anchor.set(.5,1),e.position.set(t.x,t.y),e.buttonMode=!0,e.alpha=0;const s=a.to(e,{alpha:1,duration:.25,onComplete:()=>{e.interactive=!0},onReverseComplete:()=>{this.container.removeChild(e)},paused:!0});this.trigger={sprite:e,position:t,phase:0,update(i){this.phase+=i*.08,this.sprite.position.y=this.position.y+Math.sin(this.phase)*4},tween:s,show(){this.tween.play(),u.shared.add(this.update,this)},hide(){u.shared.remove(this.update,this),this.sprite.interactive=!1,this.tween.duration(.075),this.tween.reverse()}},this.container.addChild(this.trigger.sprite),this.trigger.sprite.on("pointerdown",()=>{this.open(),this.trigger.hide()})}setItems(){this.itemPointer=new o(this.loader.resources.menuOk.texture),this.itemPointer.anchor.set(.5,0),this.itemPointer.pivot.y=-40,this.itemPointer.visible=!1,this.itemPointer.interactive=!0,this.itemPointer.buttonMode=!0,this.itemPointer.on("pointerup",()=>{this.emit("done")}),this.items=[],["menu0","menu1","menu2"].forEach((t,e)=>{const s=new V({name:t,index:e,position:[850+e*(120+8),12+70],onClick:i=>{this.items.forEach(n=>n.deselect()),i.toggle(),this.emit("select",e+1),this.itemPointer.position.copyFrom(i.container.position),this.itemPointer.visible=!0}});this.container.addChild(s.container),this.items.push(s)}),this.container.addChild(this.itemPointer)}open(){this.opened=!0,this.items.forEach(t=>t.show())}}const _=[{name:"stair0",pivotY:124},{name:"stair1",pivotY:18},{name:"stair2",pivotY:28},{name:"stair3",pivotY:25}];class ${constructor(){this.loader=p.shared,this.container=new l,this.menu=new g,this.createStairs(),this.setTweens(),this.setCurrent(0),this.menu.on("select",t=>{this.setCurrent(t)})}createStairs(){this.objects=_.map(({name:t,pivotY:e})=>{const s=new o(this.loader.resources[t].texture);return s.anchor.set(1,0),s.pivot.y=-e,s.position.set(h,0),s.zIndex=0,s})}setTweens(){const t={alpha:0,y:-40},e=a.to(t,{y:0,duration:1,ease:"bounce.out",onUpdate:()=>{this.current.position.y=t.y},paused:!0}),s=a.to(t,{alpha:1,duration:.25,ease:"power1.out",onUpdate:()=>{this.current.alpha=t.alpha},paused:!0});this.tweens=[e,s]}setCurrent(t){this.current&&this.container.removeChild(this.current),this.current=this.objects[t],this.container.addChild(this.current),t!==0&&this.tweens.forEach(e=>e.restart())}}const J=[{name:"floor",anchor:[1,1],position:[1390,640]},{name:"bookStand",position:[834,-28]},{name:"plantBackA",resource:"plantBack",position:[456,-42]},{name:"plantBackB",resource:"plantBack",position:[1135,164]},{name:"globe",position:[87,109]},{name:"table",position:[202,196]},{name:"couch",anchor:[0,0],position:[127,324]},{name:"austin",position:[696,113]},{name:"plantFront",position:[1122,438]}];class Q{constructor(){this.loader=p.shared,this.container=new l,this.setObjects()}setObjects(){this.objects={},J.forEach(({name:e,resource:s,anchor:i,position:n})=>{this.objects[e]=new o(this.loader.resources[s||e].texture),i&&this.objects[e].anchor.set(...i),this.objects[e].position.set(...n),this.container.addChild(this.objects[e])}),this.stairs=new $;const t=this.container.getChildIndex(this.objects.plantFront);this.container.addChildAt(this.stairs.container,t)}}const X="https://www.playrix.com/en/games/homescapes";class Z{constructor(){this.loader=p.shared,this.container=new l,this.menu=new g,this.setBackdrop(),this.setLogo(),this.setButton(),this.setBanner(),this.menu.on("done",this.show.bind(this))}setBackdrop(){const t=new b;t.beginFill(0,.6),t.drawRect(0,0,h,c),t.endFill(),t.on("pointerup",this.hide.bind(this)),t.alpha=0;const e=a.to(t,{alpha:1,duration:.2,paused:!0,onComplete:()=>{t.interactive=!0}});this.backdrop={graphics:t,tween:e,show(){this.tween.play()},hide(){t.interactive=!1,this.tween.reverse()}},this.container.addChild(this.backdrop.graphics)}setLogo(){const t=new o(this.loader.resources.logo.texture);t.anchor.set(.5),t.position.set(32+t.width/2,5+t.height/2),t.interactive=!0,t.buttonMode=!0,t.on("pointerup",this.redirect),t.scale.set(0);const e=a.to(t.scale,{x:1,y:1,duration:.75,ease:"elastic.out(1, 0.6)",delay:1.2,paused:!0,onComplete:()=>{this.menu.trigger.show()}});this.logo={sprite:t,tween:e},this.container.addChild(this.logo.sprite),this.logo.tween.play()}setButton(){const t=new o(this.loader.resources.button.texture);t.anchor.set(.5),t.position.set(1390/2,c-(t.height/2+18)),t.interactive=!0,t.buttonMode=!0,t.on("pointerup",this.redirect),this.button={sprite:t,phase:0,update(e){this.phase+=e*.06,this.sprite.scale.set(1+.02*Math.sin(this.phase))}},u.shared.add(this.button.update,this.button),this.container.addChild(this.button.sprite)}setBanner(){const t=new o(this.loader.resources.banner.texture);t.anchor.set(.5),t.position.set(h/2,52+t.height/2),t.buttonMode=!0,t.on("pointerup",this.redirect),t.alpha=0;const e=a.to(t,{alpha:1,duration:.2,paused:!0,onComplete:()=>{t.interactive=!0}});this.banner={sprite:t,tween:e,show(){this.tween.play()},hide(){t.interactive=!1,this.tween.reverse()}},this.container.addChild(this.banner.sprite)}redirect(){window.open(X,"_blank").focus()}show(){this.backdrop.show(),this.banner.show()}hide(){this.backdrop.hide(),this.banner.hide()}resize(){}}a.ticker.remove(a.updateRoot);class tt{constructor({canvas:t}={}){if(!t)return console.error("canvas element is missing");v(),this.viewport=new k,this.scene=new f({view:t,width:h,height:c,sharedLoader:!0,sharedTicker:!0,backgroundColor:1118481,powerPreference:"high-performance"}),this.viewport.on("resize",this.setSize.bind(this)),this.setSize(),this.setStage()}load(t){return new Promise(e=>{t.forEach(({name:s,path:i})=>this.scene.loader.add(s,i)),this.scene.loader.load(e)})}async setStage(){await this.load(D),this.environment=new Q,this.menu=new g,this.overlay=new Z,this.scene.stage.addChild(this.environment.container,this.menu.container,this.overlay.container),this.start(),document.body.classList.remove("loading")}setSize(){const t=window.innerWidth,e=window.innerHeight,s=e/c;t/e>K?(this.scene.renderer.resize(h*s,c*s),this.scene.stage.scale.set(s),this.scene.stage.position.set(0,0)):(this.scene.renderer.resize(t,e),this.scene.stage.scale.set(s),this.scene.stage.x=t-s*h,this.scene.stage.y=e-s*c)}start(){this.scene.ticker.add(this.update.bind(this))}update(t){a.updateRoot(this.scene.ticker.lastTime/1e3)}}new tt({canvas:document.getElementById("scene")});
